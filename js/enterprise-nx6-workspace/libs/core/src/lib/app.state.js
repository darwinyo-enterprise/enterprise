"use strict";var __decorate=this&&this.__decorate||function(e,r,o,t){var a,i=arguments.length,n=i<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,o):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,r,o,t);else for(var s=e.length-1;0<=s;s--)(a=e[s])&&(n=(i<3?a(n):3<i?a(r,o,n):a(r,o))||n);return 3<i&&n&&Object.defineProperty(r,o,n),n};Object.defineProperty(exports,"__esModule",{value:!0});var store_1=require("@ngxs/store"),core_1=require("@covalent/core"),app_actions_1=require("./app.actions"),defaults={username:"",alertMessage:"",errorMessage:"",progressLoading:0,confirmModel:null,confirmation:!1,isError:!1,isLoading:!1},AppState=function(){function e(e,r){this.loadingService=e,this.dialogService=r,this.circularLoadingAppName="circular-loading-facade",this.linearLoadingAppName="linear-loading-facade",this.loadingService.create({name:this.circularLoadingAppName,type:core_1.LoadingType.Circular,mode:core_1.LoadingMode.Indeterminate,color:"accent"}),this.loadingService.create({name:this.linearLoadingAppName,mode:core_1.LoadingMode.Determinate,type:core_1.LoadingType.Linear,color:"accent"})}return e.isError=function(e){return e.isError},e.errorMessage=function(e){return e.errorMessage},e.alertMessage=function(e){return e.alertMessage},e.isLoading=function(e){return e.isError},e.progressLoading=function(e){return e.progressLoading},e.confirmation=function(e){return e.confirmation},e.prototype.progressLinearLoadingOverlay=function(e,r){var o=e.patchState,t=r.payload;o({isLoading:!0,progressLoading:t}),this.loadingService.setValue(this.linearLoadingAppName,t)},e.prototype.registerLinearLoadingOverlay=function(e){(0,e.patchState)({isLoading:!0,progressLoading:0}),this.loadingService.register(this.linearLoadingAppName)},e.prototype.resolveLinearLoadingOverlay=function(e){(0,e.patchState)({isLoading:!1,isError:!1,errorMessage:"",progressLoading:0}),this.loadingService.resolve(this.linearLoadingAppName)},e.prototype.registerLoadingOverlay=function(e){(0,e.patchState)({isLoading:!0}),this.loadingService.register(this.circularLoadingAppName)},e.prototype.resolveLoadingOverlay=function(e){(0,e.patchState)({isLoading:!1,isError:!1,errorMessage:""}),this.loadingService.resolve(this.circularLoadingAppName)},e.prototype.errorOccured=function(e,r){var o=e.patchState,t=r.payload;o({errorMessage:t,isError:!0}),this.dialogService.openAlert({message:t,title:"Error Occured",closeButton:"Close",width:"400px"})},e.prototype.setUsername=function(e,r){(0,e.patchState)({username:r.payload})},e.prototype.confirm=function(e,r){var o=e.patchState,t=e.dispatch,a=r.payload,i=r.handler;o({confirmModel:a}),this.dialogService.openConfirm(a).afterClosed().subscribe(function(e){t(new app_actions_1.Confirmed(e)),i.next(e)})},e.prototype.confirmed=function(e,r){(0,e.patchState)({confirmation:r.payload})},e.prototype.alert=function(e,r){var o=e.patchState,t=r.payload;o({alertMessage:t}),this.dialogService.openAlert({message:t,title:"Alert",closeButton:"OK",width:"400px"})},__decorate([store_1.Action(app_actions_1.ProgressLinearLoadingOverlay)],e.prototype,"progressLinearLoadingOverlay",null),__decorate([store_1.Action(app_actions_1.RegisterLinearLoadingOverlay)],e.prototype,"registerLinearLoadingOverlay",null),__decorate([store_1.Action(app_actions_1.ResolveLinearLoadingOverlay)],e.prototype,"resolveLinearLoadingOverlay",null),__decorate([store_1.Action(app_actions_1.RegisterLoadingOverlay)],e.prototype,"registerLoadingOverlay",null),__decorate([store_1.Action(app_actions_1.ResolveLoadingOverlay)],e.prototype,"resolveLoadingOverlay",null),__decorate([store_1.Action(app_actions_1.ErrorOccured)],e.prototype,"errorOccured",null),__decorate([store_1.Action(app_actions_1.SetUsername)],e.prototype,"setUsername",null),__decorate([store_1.Action(app_actions_1.Confirm)],e.prototype,"confirm",null),__decorate([store_1.Action(app_actions_1.Confirmed)],e.prototype,"confirmed",null),__decorate([store_1.Action(app_actions_1.Alert)],e.prototype,"alert",null),__decorate([store_1.Selector()],e,"isError",null),__decorate([store_1.Selector()],e,"errorMessage",null),__decorate([store_1.Selector()],e,"alertMessage",null),__decorate([store_1.Selector()],e,"isLoading",null),__decorate([store_1.Selector()],e,"progressLoading",null),__decorate([store_1.Selector()],e,"confirmation",null),e=__decorate([store_1.State({name:"app",defaults:defaults})],e)}();exports.AppState=AppState;